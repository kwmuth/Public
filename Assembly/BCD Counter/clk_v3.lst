0000              1   ; clk_v3.asm: Displays seconds, minuts, and hours in HEX2 to HEX7
0000              2   ; We can set the time by flipping SW0 and using KEY.3, KEY.2, KEY.1
0000              3   ; to increment the Hours, Minutes, and Seconds.
0000              4   
                 -1   $MODDE2
0000              1   ;  MODDDE2: Register definition for DE2-8052 softcore
0000              2   ;
0000              3   ;   Copyright (C) 2011  Jesus Calvino-Fraga, jesusc at ece.ubc.ca
0000              4   ;
0000              5   ;   This library is free software; you can redistribute it and/or
0000              6   ;   modify it under the terms of the GNU Lesser General Public
0000              7   ;   License as published by the Free Software Foundation; either
0000              8   ;   version 2.1 of the License, or (at your option) any later version.
0000              9   ;
0000             10   ;   This library is distributed in the hope that it will be useful,
0000             11   ;   but WITHOUT ANY WARRANTY; without even the implied warranty of
0000             12   ;   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
0000             13   ;   Lesser General Public License for more details.
0000             14   ;
0000             15   ;   You should have received a copy of the GNU Lesser General Public
0000             16   ;   License along with this library; if not, write to the Free Software
0000             17   ;   Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307 USA
0000             18   ;
0000             19       
0000             20   P0     DATA  080H  ;PORT 0
0000             21   SP     DATA  081H  ;STACK POINTER
0000             22   DPL    DATA  082H  ;DATA POINTER - LOW BYTE
0000             23   DPH    DATA  083H  ;DATA POINTER - HIGH BYTE
0000             24   PCON   DATA  087H  ;POWER CONTROL
0000             25   TCON   DATA  088H  ;TIMER CONTROL
0000             26   TMOD   DATA  089H  ;TIMER MODE
0000             27   TL0    DATA  08AH  ;TIMER 0 - LOW BYTE
0000             28   TL1    DATA  08BH  ;TIMER 1 - LOW BYTE
0000             29   TH0    DATA  08CH  ;TIMER 0 - HIGH BYTE
0000             30   TH1    DATA  08DH  ;TIMER 1 - HIGH BYTE
0000             31   P1     DATA  090H  ;PORT 1
0000             32   SCON   DATA  098H  ;SERIAL PORT CONTROL
0000             33   SBUF   DATA  099H  ;SERIAL PORT BUFFER
0000             34   P2     DATA  0A0H  ;PORT 2
0000             35   IE     DATA  0A8H  ;INTERRUPT ENABLE
0000             36   P3     DATA  0B0H  ;PORT 3
0000             37   IP     DATA  0B8H  ;INTERRUPT PRIORITY
0000             38   T2CON  DATA  0C8H  ;TIMER 2 CONTROL
0000             39   T2MOD  DATA  0C9H  ;TIMER 2 MODE
0000             40   RCAP2L DATA  0CAH  ;TIMER 2 CAPTURE REGISTER - LOW BYTE
0000             41   RCAP2H DATA  0CBH  ;TIMER 2 CAPTURE REGISTER - HIGH BYTE
0000             42   TL2    DATA  0CCH  ;TIMER 2 - LOW BYTE
0000             43   TH2    DATA  0CDH  ;TIMER 2 - HIGH BYTE
0000             44   PSW    DATA  0D0H  ;PROGRAM STATUS WORD
0000             45   ACC    DATA  0E0H  ;ACCUMULATOR
0000             46   B      DATA  0F0H  ;MULTIPLICATION REGISTER
0000             47   IT0    BIT   088H  ;TCON.0 - EXT. INTERRUPT 0 TYPE
0000             48   IE0    BIT   089H  ;TCON.1 - EXT. INTERRUPT 0 EDGE FLAG
0000             49   IT1    BIT   08AH  ;TCON.2 - EXT. INTERRUPT 1 TYPE
0000             50   IE1    BIT   08BH  ;TCON.3 - EXT. INTERRUPT 1 EDGE FLAG
0000             51   TR0    BIT   08CH  ;TCON.4 - TIMER 0 ON/OFF CONTROL
0000             52   TF0    BIT   08DH  ;TCON.5 - TIMER 0 OVERFLOW FLAG
0000             53   TR1    BIT   08EH  ;TCON.6 - TIMER 1 ON/OFF CONTROL
0000             54   TF1    BIT   08FH  ;TCON.7 - TIMER 1 OVERFLOW FLAG
0000             55   RI     BIT   098H  ;SCON.0 - RECEIVE INTERRUPT FLAG
0000             56   TI     BIT   099H  ;SCON.1 - TRANSMIT INTERRUPT FLAG
0000             57   RB8    BIT   09AH  ;SCON.2 - RECEIVE BIT 8
0000             58   TB8    BIT   09BH  ;SCON.3 - TRANSMIT BIT 8
0000             59   REN    BIT   09CH  ;SCON.4 - RECEIVE ENABLE
0000             60   SM2    BIT   09DH  ;SCON.5 - SERIAL MODE CONTROL BIT 2
0000             61   SM1    BIT   09EH  ;SCON.6 - SERIAL MODE CONTROL BIT 1
0000             62   SM0    BIT   09FH  ;SCON.7 - SERIAL MODE CONTROL BIT 0
0000             63   EX0    BIT   0A8H  ;IE.0 - EXTERNAL INTERRUPT 0 ENABLE
0000             64   ET0    BIT   0A9H  ;IE.1 - TIMER 0 INTERRUPT ENABLE
0000             65   EX1    BIT   0AAH  ;IE.2 - EXTERNAL INTERRUPT 1 ENABLE
0000             66   ET1    BIT   0ABH  ;IE.3 - TIMER 1 INTERRUPT ENABLE
0000             67   ES     BIT   0ACH  ;IE.4 - SERIAL PORT INTERRUPT ENABLE
0000             68   ET2    BIT   0ADH  ;IE.5 - TIMER 2 INTERRUPT ENABLE
0000             69   EA     BIT   0AFH  ;IE.7 - GLOBAL INTERRUPT ENABLE
0000             70   RXD    BIT   0B0H  ;P3.0 - SERIAL PORT RECEIVE INPUT
0000             71   TXD    BIT   0B1H  ;P3.1 - SERIAL PORT TRANSMIT OUTPUT
0000             72   INT0   BIT   0B2H  ;P3.2 - EXTERNAL INTERRUPT 0 INPUT
0000             73   INT1   BIT   0B3H  ;P3.3 - EXTERNAL INTERRUPT 1 INPUT
0000             74   T0     BIT   0B4H  ;P3.4 - TIMER 0 COUNT INPUT
0000             75   T1     BIT   0B5H  ;P3.5 - TIMER 1 COUNT INPUT
0000             76   WR     BIT   0B6H  ;P3.6 - WRITE CONTROL FOR EXT. MEMORY
0000             77   RD     BIT   0B7H  ;P3.7 - READ CONTROL FOR EXT. MEMORY
0000             78   PX0    BIT   0B8H  ;IP.0 - EXTERNAL INTERRUPT 0 PRIORITY
0000             79   PT0    BIT   0B9H  ;IP.1 - TIMER 0 PRIORITY
0000             80   PX1    BIT   0BAH  ;IP.2 - EXTERNAL INTERRUPT 1 PRIORITY
0000             81   PT1    BIT   0BBH  ;IP.3 - TIMER 1 PRIORITY
0000             82   PS     BIT   0BCH  ;IP.4 - SERIAL PORT PRIORITY
0000             83   PT2    BIT   0BDH  ;IP.5 - TIMER 2 PRIORITY
0000             84   CAP2   BIT   0C8H  ;T2CON.0 - CAPTURE OR RELOAD SELECT
0000             85   CNT2   BIT   0C9H  ;T2CON.1 - TIMER OR COUNTER SELECT
0000             86   TR2    BIT   0CAH  ;T2CON.2 - TIMER 2 ON/OFF CONTROL
0000             87   EXEN2  BIT   0CBH  ;T2CON.3 - TIMER 2 EXTERNAL ENABLE FLAG
0000             88   TCLK   BIT   0CCH  ;T2CON.4 - TRANSMIT CLOCK SELECT
0000             89   RCLK   BIT   0CDH  ;T2CON.5 - RECEIVE CLOCK SELECTT
0000             90   EXF2   BIT   0CEH  ;T2CON.6 - EXTERNAL TRANSITION FLAG
0000             91   TF2    BIT   0CFH  ;T2CON.7 - TIMER 2 OVERFLOW FLAG
0000             92   P      BIT   0D0H  ;PSW.0 - ACCUMULATOR PARITY FLAG
0000             93   OV     BIT   0D2H  ;PSW.2 - OVERFLOW FLAG
0000             94   RS0    BIT   0D3H  ;PSW.3 - REGISTER BANK SELECT 0
0000             95   RS1    BIT   0D4H  ;PSW.4 - REGISTER BANK SELECT 1
0000             96   F0     BIT   0D5H  ;PSW.5 - FLAG 0
0000             97   AC     BIT   0D6H  ;PSW.6 - AUXILIARY CARRY FLAG
0000             98   CY     BIT   0D7H  ;PSW.7 - CARRY FLAG
0000             99   
0000            100   ; For the altera DE2 configured with an 8051/8052 softcore processor
0000            101   ; we have the following extra registers:
0000            102   
0000            103   HEX0   DATA  091H ; Zero turns the segment on
0000            104   HEX1   DATA  092H ; 
0000            105   HEX2   DATA  093H ; 
0000            106   HEX3   DATA  094H ; 
0000            107   HEX4   DATA  08EH ;
0000            108   HEX5   DATA  08FH ;
0000            109   HEX6   DATA  096H ;
0000            110   HEX7   DATA  097H ;
0000            111   
0000            112   P0MOD  DATA  09AH ; Input/output mode bits for port 0.  '1' sets the port to output mode.
0000            113   P1MOD  DATA  09BH ; Input/output mode bits for port 1
0000            114   P2MOD  DATA  09CH ; Input/output mode bits for port 2
0000            115   P3MOD  DATA  09DH ; Input/output mode bits for port 3
0000            116   
0000            117   LEDRA  DATA  0E8H ; LEDs LEDR0 to LEDR7 (bit addressable, ex: LEDRA.1 for LEDR1)
0000            118   LEDRB  DATA  095H ; LEDs LEDR8 to LEDR15
0000            119   LEDRC  DATA  09EH ; LEDs LEDR16, LEDR15, and LEDG8
0000            120   LEDG   DATA  0F8H ; LEDs LEDG0 to LEDG7 (bit addressable, ex: LEDG.3 for LEDG3)
0000            121   SWA    DATA  0E8H ; Switches SW0 to SW7 (bit addressable, ex: SWA.1 for SW1)
0000            122   SWB    DATA  095H ; Switches SW8 to SW15
0000            123   SWC    DATA  09EH ; Switches SW16 and SW17
0000            124   KEY    DATA  0F8H ; KEY1=KEY.1, KEY2=KEY.2, KEY3=KEY.3.  KEY0 is the reset button! 
0000            125   
0000            126   LCD_CMD   DATA 0D8H ;
0000            127   LCD_DATA  DATA 0D9H ;
0000            128   LCD_MOD   DATA 0DAH ; Write 0xff to make LCD_DATA an output
0000            129   LCD_RW    BIT  0D8H ; '0' writes to LCD
0000            130   LCD_EN    BIT  0D9H ; Toggle from '1' to '0'
0000            131   LCD_RS    BIT  0DAH ; '0' for commands, '1' for data
0000            132   LCD_ON    BIT  0DBH ; Write '1' to power the LCD
0000            133   LCD_BLON  BIT  0DCH ; Write '1' to turn on back light
0000            134   
0000            135   FLASH_CMD  data 0DBH ; The control bits of the flash memory:
0000            136   ; bit 0: FL_RST_N  Set to 1 for normal operation
0000            137   ; bit 1: FL_WE_N
0000            138   ; bit 2: FL_OE_N
0000            139   ; bit 3: FL_CE_N
0000            140   FLASH_DATA data 0DCH ; 8-bit data bus of flash memory.
0000            141   FLASH_MOD  data 0DDH ; 0xff makes FLASH_DATA output.  0x00 makes FLASH_DATA input.
0000            142   FLASH_ADD0 data 0E1H ; address bits 0 to 7.
0000            143   FLASH_ADD1 data 0E2H ; address bits 8 to 15.
0000            144   FLASH_ADD2 data 0E3H ; address bits 16 to 21.
0000            145   
0000              6   
0000              7   org 0000H
0000 02017C       8            ljmp myprogram
0003              9            
000B             10   org 000BH
000B 020019      11            ljmp ISR_timer0
000E             12            
0030             13   DSEG at 30H
0030             14   count10ms: ds 1
0031             15   seconds:   ds 1
0032             16   minutes:   ds 1
0033             17   hours:     ds 1
0034             18   AlarmCount:      ds 3
0037             19   
0000             20   BSEG
0000             21   meridiem:        dbit 1
0001             22   meridiemAlarm: dbit 1
0002             23   
000E             24   CSEG
000E             25   
000E             26   ; Look-up table for 7-segment displays
000E             27   myLUT:
000E C0F9A4B0    28       DB 0C0H, 0F9H, 0A4H, 0B0H, 099H
     99
0013 9282F880    29       DB 092H, 082H, 0F8H, 080H, 090H
     90
0018 FF          30       DB 0FFH ; All segments off
0019             31   
0019             32   XTAL           EQU 33333333
0019             33   FREQ           EQU 100
0019             34   TIMER0_RELOAD  EQU 65538-(XTAL/(12*FREQ))
0019             35   
0019             36   ISR_Timer0:
0019             37            ; Reload the timer
0019 758C93      38       mov TH0, #high(TIMER0_RELOAD)
001C 758A81      39       mov TL0, #low(TIMER0_RELOAD)
001F             40       
001F             41       ; Save used register into the stack
001F C0D0        42       push psw
0021 C0E0        43       push acc
0023 C083        44       push dph
0025 C082        45       push dpl
0027             46       
0027 20E845      47       jb SWA.0, ISR_Timer0_L0 ; Setting up time.  Do not increment anything
002A             48       
002A             49       ; Increment the counter and check if a second has passed
002A 0530        50       inc count10ms
002C E530        51       mov a, count10ms
002E B4643E      52       cjne A, #100, ISR_Timer0_L0
0031 753000      53       mov count10ms, #0
0034             54       
0034 E531        55       mov a, seconds
0036 2401        56       add a, #1
0038 D4          57       da a
0039 F531        58       mov seconds, a
003B B46031      59       cjne A, #60H, ISR_Timer0_L0
003E 753100      60       mov seconds, #0
0041             61   
0041 E532        62       mov a, minutes
0043 2401        63       add a, #1
0045 D4          64       da a
0046 F532        65       mov minutes, a
0048 B46024      66       cjne A, #60H, ISR_Timer0_L0
004B 753200      67       mov minutes, #0
004E             68   
004E E533        69       mov a, hours
0050 2401        70       add a, #1
0052 D4          71       da a
0053 F533        72       mov hours, a
0055 B41211      73       cjne A, #12H, M8
0058             74   CPLMeridiem:
0058 B200        75            cpl meridiem
005A 300003      76            jnb meridiem, AM
005D 200006      77            jb meridiem, PM
0060 759108      78   AM:      mov HEX0, #08H
0063 02006F      79            ljmp ISR_Timer0_L0
0066 75910C      80   PM: mov HEX0, #0CH
0069 B41303      81   M8: cjne A, #13H, ISR_Timer0_L0
006C 753301      82       mov hours, #1
006F             83       
006F             84       
006F             85   ISR_Timer0_L0:
006F 20E935      86            jb SWA.1, do_nothing
0072             87            ; Update the display.  This happens every 10 ms
0072 90000E      88            mov dptr, #myLUT
0075             89   
0075 E531        90            mov a, seconds
0077 540F        91            anl a, #0fH
0079 93          92            movc a, @a+dptr
007A F593        93            mov HEX2, a
007C E531        94            mov a, seconds
007E C4          95            swap a
007F 540F        96            anl a, #0fH
0081 93          97            movc a, @a+dptr
0082 F594        98            mov HEX3, a
0084             99   
0084 E532       100            mov a, minutes
0086 540F       101            anl a, #0fH
0088 93         102            movc a, @a+dptr
0089 F58E       103            mov HEX4, a
008B E532       104            mov a, minutes
008D C4         105            swap a
008E 540F       106            anl a, #0fH
0090 93         107            movc a, @a+dptr
0091 F58F       108            mov HEX5, a
0093            109   
0093 E533       110            mov a, hours
0095 540F       111            anl a, #0fH
0097 93         112            movc a, @a+dptr
0098 F596       113            mov HEX6, a
009A E533       114            mov a, hours
009C 20E402     115            jb acc.4, ISR_Timer0_L1
009F 74A0       116            mov a, #0A0H
00A1            117   ISR_Timer0_L1:
00A1 C4         118            swap a
00A2 540F       119            anl a, #0fH
00A4 93         120            movc a, @a+dptr
00A5 F597       121            mov HEX7, a
00A7            122   
00A7            123            ; Restore used registers
00A7            124   do_nothing:
00A7 D082       125            pop dpl
00A9 D083       126            pop dph
00AB D0E0       127            pop acc
00AD D0D0       128            pop psw    
00AF 32         129            reti
00B0            130   
00B0            131   Init_Timer0:     
00B0 758901     132            mov TMOD,  #00000001B ; GATE=0, C/T*=0, M1=0, M0=1: 16-bit timer
00B3 C28C       133            clr TR0 ; Disable timer 0
00B5 C28D       134            clr TF0
00B7 758C93     135       mov TH0, #high(TIMER0_RELOAD)
00BA 758A81     136       mov TL0, #low(TIMER0_RELOAD)
00BD D28C       137       setb TR0 ; Enable timer 0
00BF D2A9       138       setb ET0 ; Enable timer 0 interrupt
00C1 22         139       ret
00C2            140   
00C2            141   DisplayAlarmVal:
00C2 90000E     142            mov dptr, #myLUT        
00C5            143   ; Display Digit 1
00C5 E534       144            mov A, AlarmCount+0
00C7 540F       145       anl A, #0FH
00C9 93         146       movc A, @A+dptr
00CA F593       147       mov HEX2, A   
00CC            148   ; Display Digit 2
00CC E534       149       mov A, AlarmCount+0
00CE C4         150       swap A
00CF 540F       151       anl A, #0FH
00D1 93         152       movc A, @A+dptr
00D2 F594       153       mov HEX3, A   
00D4            154   ; Display digit 3
00D4 E535       155            mov A, AlarmCount+1
00D6 540F       156            anl A, #0FH
00D8 93         157            movc A, @A+dptr
00D9 F58E       158            mov HEX4, A     
00DB            159   ;Display digit 4
00DB E535       160            mov A, AlarmCount+1
00DD C4         161            swap A
00DE 540F       162            anl A, #0FH
00E0 93         163            movc A, @A+dptr
00E1 F58F       164            mov HEX5, A     
00E3            165   ;Display digit 5
00E3 E536       166            mov A, AlarmCount+2
00E5 540F       167            anl A, #0FH
00E7 93         168            movc A, @A+dptr
00E8 F596       169            mov HEX6, A
00EA            170   ;Display digit 6
00EA E536       171            mov A, AlarmCount+2
00EC C4         172            swap A
00ED 540F       173            anl A, #0FH
00EF 93         174            movc A, @A+dptr
00F0 F597       175            mov HEX7, A
00F2 0200F5     176            ljmp SetAlarm
00F5            177   
00F5            178   SetAlarm:
00F5 20F917     179            jb KEY.1, M6
00F8 D2FA       180            setb LEDG.2
00FA 30F9FD     181            jnb KEY.1, $
00FD E534       182            mov a, AlarmCount+0
00FF 2401       183       add a, #1
0101 D4         184       da a
0102 F534       185       mov AlarmCount+0, a
0104 B460BB     186       cjne A, #60H, DisplayAlarmVal
0107 753400     187       mov AlarmCount+0, #0
010A C2FA       188       clr LEDG.2
010C 0200C2     189       ljmp DisplayAlarmVal
010F 20FA13     190   M6:      jb KEY.2, M7
0112 30FAFD     191       jnb KEY.2, $
0115 E535       192       mov a, AlarmCount+1
0117 2401       193            add a, #1
0119 D4         194            da a
011A F535       195            mov AlarmCount+1, a
011C B460A3     196       cjne A, #60H, DisplayAlarmVal
011F 753500     197       mov AlarmCount+1, #0
0122 0200C2     198       ljmp DisplayAlarmVal
0125 20FB16     199   M7: jb KEY.3, M9
0128 30FBFD     200            jnb KEY.3, $
012B E536       201            mov a, AlarmCount+2
012D 2401       202            add a, #1
012F D4         203            da a
0130 F536       204            mov AlarmCount+2, a
0132 120144     205            lcall AlarmAMPM
0135 B4138A     206       cjne A, #13H, DisplayAlarmVal
0138 753601     207       mov AlarmCount+2, #1H
013B 0200C2     208       ljmp DisplayAlarmVal
013E 20E9B4     209   M9:      jb SWA.1, SetAlarm
0141 0201AC     210            ljmp M4
0144            211            
0144            212   AlarmAMPM:
0144 E536       213            mov a, AlarmCount+2
0146 B41210     214            cjne a, #12H, returnAlarm
0149 B201       215            cpl meridiemAlarm
014B 300103     216            jnb meridiemAlarm, ChangeToAMAlarm
014E 200105     217            jb meridiemAlarm, ChangeToPMAlarm
0151            218   ChangeToAMAlarm:
0151 759108     219            mov HEX0, #08H
0154 8019       220            sjmp return
0156            221   ChangeToPMAlarm:
0156 75910C     222            mov HEX0, #0CH
0159            223   returnAlarm:
0159 22         224            ret
015A            225   
015A            226   AMPM:
015A E533       227            mov a, hours
015C B41210     228            cjne a, #12H, return
015F B200       229            cpl meridiem
0161 300003     230            jnb meridiem, ChangeToAM
0164 200005     231            jb meridiem, ChangeToPM
0167            232   ChangeToAM:
0167 759108     233            mov HEX0, #08H
016A 8003       234            sjmp return
016C            235   ChangeToPM:
016C 75910C     236            mov HEX0, #0CH
016F            237   return:
016F 22         238            ret
0170            239   
0170            240   SetAlarm1:
0170 753400     241            mov AlarmCount+0, #00H
0173 753500     242            mov AlarmCount+1, #00H
0176 753612     243            mov AlarmCount+2, #12H
0179 0200F5     244            ljmp SetAlarm
017C            245            
017C            246   myprogram:
017C 75817F     247            mov SP, #7FH
017F 75E800     248            mov LEDRA,#0
0182 759500     249            mov LEDRB,#0
0185 759E00     250            mov LEDRC,#0
0188 75F800     251            mov LEDG,#0
018B            252            
018B 753100     253            mov seconds, #00H
018E 753200     254            mov minutes, #00H
0191 753312     255            mov hours, #12H
0194            256            
0194 753400     257            mov AlarmCount+0, #00H
0197 753500     258            mov AlarmCount+1, #00H
019A 753612     259            mov AlarmCount+2, #12H
019D            260            
019D C200       261            clr meridiem
019F C201       262            clr meridiemAlarm
01A1 759108     263            mov HEX0, #08H
01A4            264   
01A4 1200B0     265            lcall Init_Timer0
01A7 D2AF       266       setb EA  ; Enable all interrupts
01A9            267   
01A9            268   M0:
01A9 20E9C4     269            jb SWA.1, SetAlarm1
01AC 30E8FA     270   M4:      jnb SWA.0, M0
01AF 20FB13     271            jb KEY.3, M1
01B2 30FBFD     272       jnb KEY.3, $
01B5 E533       273       mov a, hours
01B7 2401       274            add a, #1
01B9 D4         275            da a
01BA F533       276            mov hours, a
01BC 12015A     277            lcall AMPM
01BF B41303     278       cjne A, #13H, M1
01C2 753301     279       mov hours, #1
01C5            280   
01C5            281   M1:      
01C5 20FA10     282            jb KEY.2, M2
01C8 30FAFD     283       jnb KEY.2, $
01CB E532       284       mov a, minutes
01CD 2401       285            add a, #1
01CF D4         286            da a
01D0 F532       287            mov minutes, a
01D2 B46003     288       cjne A, #60H, M2
01D5 753201     289       mov minutes, #1
01D8            290   
01D8            291   M2:      
01D8 20F910     292            jb KEY.1, M3
01DB 30F9FD     293            jnb KEY.1, $
01DE E531       294            mov a, seconds
01E0 2401       295            add a, #1
01E2 D4         296            da a
01E3 F531       297            mov seconds, a
01E5 B46003     298       cjne A, #60H, M3
01E8 753101     299       mov seconds, #1
01EB            300   
01EB            301   M3:      
01EB 0201A9     302            ljmp M0
01EE            303   END
